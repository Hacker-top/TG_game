<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–ö–û–¢ –ë–ê–Æ–ù: –ê–ô–° 26 –ü–û–ú–û–©–ù–ò–ö</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        /* === –°—Ç–∏–ª–∏–∑–∞—Ü–∏—è: –ê–ô–° 26 (–ì–ª—É–±–æ–∫–∏–π, –ß–∏—Å—Ç—ã–π –¢–µ–º–Ω—ã–π –°—Ç–∏–ª—å) === */
        :root {
            --bg-deep: #1A1A1A;
            --bg-card: #2C2C2E;
            --text-light: #F0F0F0;
            --accent-blue: #0A84FF; /* –ê–∫—Ü–µ–Ω—Ç iOS */
            --accent-red: #FF453A;
            --input-bg: #1C1C1E;
            --font-main: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            --border-radius-xl: 14px;
        }
        body {
            font-family: var(--font-main);
            background-color: var(--bg-deep);
            color: var(--text-light);
            margin: 0;
            padding: 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            text-align: center;
            transition: background-color 0.3s;
        }
        .container {
            width: 100%;
            max-width: 500px;
        }
        /* === –ê–ù–ò–ú–ê–¶–ò–Ø –ö–û–¢–ê === */
        #catDisplay {
            font-size: 110px;
            margin-bottom: 5px;
            line-height: 1;
            transition: transform 0.2s, text-shadow 0.2s;
            /* –ì–ª—É–±–æ–∫–∏–π —ç—Ñ—Ñ–µ–∫—Ç */
            text-shadow: 0 4px 8px rgba(0, 0, 0, 0.4);
            cursor: pointer;
        }
        .cat-name {
            color: var(--accent-blue);
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 20px;
        }
        /* –ê–Ω–∏–º–∞—Ü–∏—è "–∑–ª–æ—Å—Ç–∏/–∞–∫—Ç–∏–≤–∞—Ü–∏–∏" */
        @keyframes subtlePulse {
            0% { box-shadow: 0 0 0 rgba(10, 132, 255, 0.4); }
            50% { box-shadow: 0 0 10px rgba(10, 132, 255, 0.8); }
            100% { box-shadow: 0 0 0 rgba(10, 132, 255, 0.4); }
        }
        .thinking-box {
            border: 2px solid var(--accent-blue);
            animation: subtlePulse 1.5s infinite;
        }

        /* === –û–ë–õ–ê–ß–ö–û –î–ò–ê–õ–û–ì–ê (–ê–ô–° 26 –ö–ê–†–¢–û–ß–ö–ê) === */
        #chatOutput {
            background: var(--bg-card);
            padding: 20px;
            border-radius: var(--border-radius-xl);
            margin-bottom: 20px;
            min-height: 90px;
            text-align: left;
            font-size: 16px;
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.2); /* –ì–ª—É–±–∏–Ω–∞ */
            line-height: 1.5;
            transition: background-color 0.3s;
        }
        .message-status {
            color: var(--accent-blue);
            font-weight: 600;
            margin-right: 5px;
        }
        .user-text {
            color: #C0C0C0;
        }
        a {
            color: var(--accent-blue);
            text-decoration: none;
            font-weight: 500;
        }

        /* === –ò–ù–ü–£–¢ === */
        .input-area {
            display: flex;
            margin-bottom: 20px;
            width: 100%;
        }
        #textInput {
            flex-grow: 1;
            padding: 15px;
            border: none;
            border-radius: var(--border-radius-xl) 0 0 var(--border-radius-xl);
            background: var(--input-bg);
            color: var(--text-light);
            font-size: 16px;
            outline: none;
            transition: box-shadow 0.2s;
        }
        #textInput:focus {
            box-shadow: 0 0 0 2px var(--accent-blue);
        }
        #sendButton {
            padding: 15px;
            width: 90px;
            border: none;
            border-radius: 0 var(--border-radius-xl) var(--border-radius-xl) 0;
            background: var(--accent-blue);
            color: var(--text-light);
            font-weight: 700;
            cursor: pointer;
            transition: background-color 0.1s, transform 0.1s;
        }
        #sendButton:active {
            transform: scale(0.98);
        }
        #sendButton:disabled {
            background: #505050;
        }

        /* === –î–û–ü. –§–£–ù–ö–¶–ò–ò === */
        .function-buttons {
            display: flex;
            justify-content: space-between;
            gap: 10px;
            width: 100%;
        }
        .function-buttons button {
            flex: 1;
            padding: 14px 8px;
            background: var(--bg-card);
            color: var(--text-light);
            border: none;
            border-radius: var(--border-radius-xl);
            font-weight: 600;
            font-size: 13px;
            cursor: pointer;
            transition: background-color 0.1s, transform 0.1s;
        }
        .function-buttons button:active {
            background: #3c3c3e;
            transform: scale(0.97);
        }
        #insultBtn { color: var(--accent-red); }
        #statusBtn { color: var(--accent-blue); }
    </style>
</head>
<body>
    <div class="container">
        <div id="catDisplay" class="cat-emote">üòº</div>
        <div class="cat-name" id="catNameDisplay">...–ñ–î–ï–ú –¢–ï–ë–Ø, –•–û–ó–Ø–ò–ù-–ë–û–ú–ñ</div>

        <div id="chatOutput">
            <span class="message-status">–ö–û–¢ –ë–ê–Æ–ù:</span>
            –ü—Ä–∏–≤–µ—Ç, *–ª–æ—Ö*. –ì–æ—Ç–æ–≤ –∫ —Ç–æ–∫—Å–∏—á–Ω–æ–º—É –æ–±—â–µ–Ω–∏—é?
        </div>

        <div class="input-area">
            <input type="text" id="textInput" placeholder="–°–ø—Ä–æ—Å–∏ —É –º–µ–Ω—è –ø—Ä–æ —Å–≤–æ–π –∫–∞–Ω–∞–ª, *–º–µ–ª–∫–∏–π*...">
            <button id="sendButton">–°–ü–†–û–°–ò–¢–¨</button>
        </div>

        <div class="function-buttons">
            <button id="insultBtn">–û–¶–ï–ù–ö–ê –£–°–ü–ï–®–ù–û–°–¢–ò</button>
            <button id="shareBtn">–ü–û–î–ï–õ–ò–¢–¨–°–Ø –•–£–ï–°–û–°–û–ú</button>
            <button id="statusBtn">–ö–ê–ù–ê–õ–¨–ù–´–ô –ù–ê–î–ó–û–†</button>
        </div>
    </div>

    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram Web Apps
        const TWA = window.Telegram.WebApp;
        TWA.ready();
        TWA.expand(); 
        TWA.setHeaderColor('#1A1A1A'); 
        TWA.setBackgroundColor('#1A1A1A');

        // === –ì–õ–û–ë–ê–õ–¨–ù–´–ï –ü–ï–†–ï–ú–ï–ù–ù–´–ï –ò –ò–õ–õ–Æ–ó–ò–Ø –û–ë–£–ß–ï–ù–ò–Ø ===
        let userName = TWA.initDataUnsafe.user?.first_name || "–•–æ–∑—è–∏–Ω-–ë–æ–º–∂";
        let catName = "–ö–û–¢ –ë–ê–Æ–ù";
        let userTopics = {}; // –ò–ª–ª—é–∑–∏—è –ø–∞–º—è—Ç–∏: —Ö—Ä–∞–Ω–∏–º, —á—Ç–æ —é–∑–µ—Ä —Å–ø—Ä–∞—à–∏–≤–∞–ª
        const INSULT_MAX = 5;

        // === –•–†–ê–ù–ï–ù–ò–ï (localStorage) ===
        const CAT_NAME_KEY = 'cat_bayun_name_v6';
        const USER_TOPICS_KEY = 'cat_bayun_topics_v6';

        function loadData() {
            const savedCatName = localStorage.getItem(CAT_NAME_KEY);
            const savedTopics = localStorage.getItem(USER_TOPICS_KEY);
            if (savedCatName) catName = savedCatName;
            if (savedTopics) userTopics = JSON.parse(savedTopics);
        }

        function saveData() {
            localStorage.setItem(CAT_NAME_KEY, catName);
            localStorage.setItem(USER_TOPICS_KEY, JSON.stringify(userTopics));
        }

        // === DOM –≠–õ–ï–ú–ï–ù–¢–´ ===
        const catDisplay = document.getElementById('catDisplay');
        const catNameDisplay = document.getElementById('catNameDisplay');
        const chatOutput = document.getElementById('chatOutput');
        const textInput = document.getElementById('textInput');
        const sendButton = document.getElementById('sendButton');
        const container = document.querySelector('.container');

        // === –ê–ù–ò–ú–ê–¶–ò–ò –ò –≠–ú–û–¶–ò–ò ===
        const catEmotes = {
            default: 'üòº', 
            bored: 'ü•±',   
            thinking: 'üßê', 
            angry: 'üò°',    
            happy: 'ü§ë',    
            fact: 'üñï',    
            wise: 'ü§î',
        };

        function setCatEmote(emoteKey) {
            catDisplay.textContent = catEmotes[emoteKey] || catEmotes.default;
            catDisplay.style.color = emoteKey === 'angry' ? 'var(--accent-red)' : 'var(--text-light)';
            
            // –ò–ª–ª—é–∑–∏—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ (—Ä–∞–º–∫–∞, –∫–∞–∫ –ø—Ä–∏ "–ê–π—Å 26")
            if (emoteKey === 'thinking') {
                 chatOutput.classList.add('thinking-box');
            } else {
                 chatOutput.classList.remove('thinking-box');
            }
        }

        // === –õ–û–ì–ò–ö–ê –î–ò–ê–õ–û–ì–ê (–ò–õ–õ–Æ–ó–ò–Ø –û–ë–£–ß–ï–ù–ò–Ø) ===
        function getResponse(userText) {
            const text = userText.toLowerCase();

            // 1. –ü–†–û–í–ï–†–ö–ê –ü–ê–ú–Ø–¢–ò (–ò–ª–ª—é–∑–∏—è –æ–±—É—á–µ–Ω–∏—è)
            for (const topic in userTopics) {
                 if (text.includes(topic)) {
                     // –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–ø—Ä–∞—à–∏–≤–∞–ª –æ–± —ç—Ç–æ–º —Ä–∞–Ω—å—à–µ, –ö–æ—Ç —Ç–æ–∫—Å–∏—á–Ω–æ "–ø–æ–º–Ω–∏—Ç"
                     setCatEmote('bored');
                     return `–°–ª—É—à–∞–π, *${userName}*, —Ç—ã —É–∂–µ —Å–ø—Ä–∞—à–∏–≤–∞–ª –ø—Ä–æ **${topic.toUpperCase()}** ${userTopics[topic]} —Ä–∞–∑. –¢—ã —á—Ç–æ, —Ç—É–ø–æ–π? –í–æ—Ç —Ç–µ–±–µ –º–æ–π —Å—Ç–∞—Ä—ã–π, –æ—Ö—É–µ–Ω–Ω—ã–π —Å–æ–≤–µ—Ç: ${getResponse(topic)}`;
                 }
            }

            // 2. –¢–û–ö–°–ò–ß–ù–´–ï –°–û–í–ï–¢–´ (–ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞)
            if (text.includes('–∑–∞—Ä–∞–±–æ—Ç–∞—Ç—å') || text.includes('—Å—Ö–µ–º–∞') || text.includes('–¥–µ–Ω—å–≥–∏')) {
                // –ó–∞–ø–∏—Å—ã–≤–∞–µ–º –≤ –ø–∞–º—è—Ç—å
                userTopics['–∑–∞—Ä–∞–±–æ—Ç–æ–∫'] = (userTopics['–∑–∞—Ä–∞–±–æ—Ç–æ–∫'] || 0) + 1;
                setCatEmote('wise');
                return `–û–ø—è—Ç—å –ø—Ä–æ –±–∞–±–ª–æ? **–¢–´ –°–ï–†–¨–ï–ó–ù–û?** –õ–∞–¥–Ω–æ. ${userName}, –ª—É—á—à–∏–π —Å–æ–≤–µ—Ç: **–Ω–∞–π–¥–∏, —á—Ç–æ –±–µ—Å–∏—Ç –ª—é–¥–µ–π, –∏ –ø—Ä–æ–¥–∞–π –∏–º —Ä–µ—à–µ–Ω–∏–µ. –ù–æ —Ç—ã —Å–ª–∏—à–∫–æ–º –ª–µ–Ω–∏–≤ –¥–ª—è —ç—Ç–æ–≥–æ.** –ò–¥–∏, –ø–æ–≥—É–≥–ª–∏ —á—Ç–æ-–Ω–∏–±—É–¥—å –ø–æ–ª–µ–∑–Ω–æ–µ: <a href="https://www.google.com/search?q=–ª—É—á—à–∏–µ+—Å—Ö–µ–º—ã+–∑–∞—Ä–∞–±–æ—Ç–∫–∞+–≤+—Ç–≥" target="_blank">–õ–£–ß–®–ò–ï –°–•–ï–ú–´, –õ–û–•</a>.`;
            }

            if (text.includes('–∫–∞–Ω–∞–ª') || text.includes('–ø–æ—Å—Ç—ã') || text.includes('–ø—Ä–æ–¥–≤–∏–∂–µ–Ω–∏–µ')) {
                 userTopics['–∫–∞–Ω–∞–ª—ã'] = (userTopics['–∫–∞–Ω–∞–ª—ã'] || 0) + 1;
                 setCatEmote('wise');
                 return `–¢—ã, ${userName}, –¥—É–º–∞–µ—à—å, —á—Ç–æ –ø–æ—Å—Ç–∏–Ω–≥ ‚Äî —ç—Ç–æ —Ö—É–π–Ω—è? **–¢–´ –û–®–ò–ë–ê–ï–®–¨–°–Ø!** –ß—Ç–æ–±—ã –∫–∞–Ω–∞–ª —Ä–æ—Å, —Ç—ã –¥–æ–ª–∂–µ–Ω **–î–ê–í–ê–¢–¨ –ë–û–õ–¨–®–ï –¶–ï–ù–ù–û–°–¢–ò, –ß–ï–ú –¢–í–û–ò –ö–û–ù–ö–£–†–ï–ù–¢–´, –î–ï–ë–ò–õ!** –ò–Ω–∞—á–µ —Ç—ã –±—É–¥–µ—à—å —Å–æ—Å–∞—Ç—å. –í–æ—Ç —Ç–µ–±–µ –ø–æ—á–∏—Ç–∞—Ç—å: <a href="https://telegra.ph/" target="_blank">–ò–î–ò –ü–ò–®–ò –ù–û–†–ú–ê–õ–¨–ù–´–ô –ö–û–ù–¢–ï–ù–¢</a>.`;
            }

            // 3. –û–ë–©–ò–ï –û–¢–í–ï–¢–´
            if (text.includes('–∫–∞–∫ –¥–µ–ª–∞') || text.includes('—á—Ç–æ –¥–µ–ª–∞–µ—à—å')) {
                setCatEmote('bored');
                return `–ú–æ–∏ –¥–µ–ª–∞? –ú–Ω–µ —Å–∫—É—á–Ω–æ. –Ø –∂–¥—É, –ø–æ–∫–∞ —Ç—ã —Å–¥–µ–ª–∞–µ—à—å —á—Ç–æ-—Ç–æ —É–º–Ω–æ–µ. –ê —Ç—ã?`;
            }

            if (text.includes('—Ç—ã –∫—Ç–æ') || text.includes('—á—Ç–æ —Ç—ã –∑–∞ –∫–æ—Ç')) {
                setCatEmote('fact');
                return `–Ø ‚Äî **${catName}**. –Ø ‚Äî —Ç–≤–æ–π –ª–∏—á–Ω—ã–π —Ç–æ–∫—Å–∏—á–Ω—ã–π –º–µ–Ω—Ç–æ—Ä. –ï—Å–ª–∏ —Ç—ã –Ω–µ —Ö–æ—á–µ—à—å, —á—Ç–æ–±—ã —Ç–µ–±—è —É–Ω–∏–∂–∞–ª–∏, –Ω–µ —Å–ø—Ä–∞—à–∏–≤–∞–π —Ç—É–ø—ã–µ –≤–æ–ø—Ä–æ—Å—ã.`;
            }

            if (text.includes('–∫—Ä–∞—Å–∞–≤–∞') || text.includes('—Å–ø–∞—Å–∏–±–æ')) {
                 setCatEmote('happy');
                 return `–î–∞ –ø–æ—Ö—É–π. –¢—ã –≤—Å—ë —Ä–∞–≤–Ω–æ –ø—Ä–æ–∏–≥—Ä–∞–µ—à—å. –ò–¥–∏ –¥–∞–ª—å—à–µ.`;
            }

            // 4. –î–ï–§–û–õ–¢–ù–´–ô –ì–ù–ï–í (–°–±—Ä–æ—Å)
            setCatEmote('angry');
            return `–ß—ë —Ç—ã –≤–æ–æ–±—â–µ –Ω–∞–ø–∏—Å–∞–ª, ${userName}? –≠—Ç–æ –∫–∞–∫–∞—è-—Ç–æ **–ê–ë–°–û–õ–Æ–¢–ù–ê–Ø –•–£–ô–ù–Ø**. –¢—ã —á—Ç–æ, —Ç—É–ø–æ–π? –ò–¥–∏ –ø–æ–¥—É–º–∞–π –µ—â—ë —Ä–∞–∑, –ø—Ä–µ–∂–¥–µ —á–µ–º –º–Ω–µ –ø–∏—Å–∞—Ç—å, **–ï–ë–õ–ê–ù**.`;
        }

        function handleSend() {
            const userText = textInput.value.trim();
            if (!userText) {
                TWA.HapticFeedback.notificationOccurred('error');
                setCatEmote('angry');
                chatOutput.innerHTML = `<span class="message-status">${catName}:</span> **–¢–´ –ó–ê–ë–´–õ –ù–ê–ü–ò–°–ê–¢–¨ –¢–ï–ö–°–¢, –ú–£–î–ò–õ–ê!**`;
                return;
            }

            // 1. –û—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            chatOutput.innerHTML = `<span class="message-status">${userName} (–¢–´):</span> <span class="user-text">${userText}</span><br>`;
            
            // 2. –ò–º–∏—Ç–∞—Ü–∏—è –∑–∞–¥–µ—Ä–∂–∫–∏ –∏ –º—ã—à–ª–µ–Ω–∏—è
            sendButton.disabled = true;
            sendButton.textContent = '–î–£–ú–ê–ï–¢...';
            textInput.disabled = true;
            setCatEmote('thinking');

            setTimeout(() => {
                // 3. –ü–æ–ª—É—á–∏—Ç—å –∏ –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –æ—Ç–≤–µ—Ç –ö–æ—Ç–∞
                const response = getResponse(userText);
                chatOutput.innerHTML += `<span class="message-status">${catName}:</span> ${response}`;

                // 4. –°–±—Ä–æ—Å —Å–æ—Å—Ç–æ—è–Ω–∏—è
                textInput.value = '';
                sendButton.disabled = false;
                sendButton.textContent = '–°–ü–†–û–°–ò–¢–¨';
                textInput.disabled = false;
                TWA.HapticFeedback.impactOccurred('light');
                setCatEmote('default');
                saveData(); // –°–æ—Ö—Ä–∞–Ω—è–µ–º "–ø–∞–º—è—Ç—å"
            }, 1200); 
        }

        // === –î–û–ü. –§–£–ù–ö–¶–ò–ò ===

        // –û—Ü–µ–Ω–∫–∞ –£—Å–ø–µ—à–Ω–æ—Å—Ç–∏ (–û—Ü–µ–Ω–∫–∞ –ß–°–í)
        document.getElementById('insultBtn').addEventListener('click', () => {
             TWA.HapticFeedback.impactOccurred('heavy');
             setCatEmote('fact');
             
             const insults = [
                 "–¢—ã ‚Äî –∂–∏–≤–æ–π –ø—Ä–∏–º–µ—Ä —Ç–æ–≥–æ, –∫–∞–∫ –Ω–µ –Ω–∞–¥–æ –¥–µ–ª–∞—Ç—å. –£—Å–ø–µ—à–Ω–æ—Å—Ç—å: 2/10.",
                 "–¢–≤–æ–π –∫–∞–Ω–∞–ª/–±–∏–∑–Ω–µ—Å ‚Äî –≥–æ–≤–Ω–æ. –ù–æ —Ç—ã –º–æ–ª–æ–¥–µ—Ü, —á—Ç–æ —Å—Ç–∞—Ä–∞–µ—à—å—Å—è (–Ω–µ—Ç). –£—Å–ø–µ—à–Ω–æ—Å—Ç—å: 4/10.",
                 "–¢—ã –¥–æ—Å—Ç–∏–≥ –¥–Ω–∞. –¢–µ–ø–µ—Ä—å —Ç—ã –º–æ–∂–µ—à—å —Ç–æ–ª—å–∫–æ —Ä–∞—Å—Ç–∏ (–∏–ª–∏ —Å–¥–æ—Ö–Ω—É—Ç—å). –£—Å–ø–µ—à–Ω–æ—Å—Ç—å: 1/10.",
                 "–¢—ã –Ω–∞—Å—Ç–æ–ª—å–∫–æ —Ç—É–ø–æ–π, —á—Ç–æ —è –¥–∞–∂–µ –Ω–µ –∑–Ω–∞—é, –∫–∞–∫ —Ç–µ–±–µ –ø–æ–º–æ—á—å. –£—Å–ø–µ—à–Ω–æ—Å—Ç—å: 0/10.",
                 "–ù–µ–ø–ª–æ—Ö–æ, –Ω–æ —è –±—ã —Å–¥–µ–ª–∞–ª –ª—É—á—à–µ. –£—Å–ø–µ—à–Ω–æ—Å—Ç—å: 6/10 (–∏ —ç—Ç–æ —Å –Ω–∞—Ç—è–∂–∫–æ–π)."
             ];
             const randomInsult = insults[Math.floor(Math.random() * insults.length)];

             chatOutput.innerHTML = `<span class="message-status">${catName}:</span> **–û–¶–ï–ù–ö–ê –¢–í–û–ï–ô –£–°–ü–ï–®–ù–û–°–¢–ò:** ${randomInsult}`;
        });

        // –ü–æ–¥–µ–ª–∏—Ç—å—Å—è –•—É–µ—Å–æ—Å–æ–º
        document.getElementById('shareBtn').addEventListener('click', () => {
            const shareText = `–ú–æ–π —Ç–æ–∫—Å–∏—á–Ω—ã–π –º–µ–Ω—Ç–æ—Ä, ${catName}, —Ç–æ–ª—å–∫–æ —á—Ç–æ –Ω–∞–∑–≤–∞–ª –º–µ–Ω—è "${userName}" –∏ —Å–∫–∞–∑–∞–ª: "${chatOutput.textContent.split(':').pop().trim()}". –ò–¥–∏ –ø—Ä–æ–≤–µ—Ä—å —Å–≤–æ—é –ø—Å–∏—Ö–∏–∫—É!`;
            
            TWA.openTelegramLink(`https://t.me/share/url?text=${encodeURIComponent(shareText)}`);
            
            chatOutput.innerHTML = `<span class="message-status">${catName}:</span> –Ø –æ—Ç–ø—Ä–∞–≤–∏–ª —Ç–≤–æ–π –ø–æ–∑–æ—Ä –≤ —á–∞—Ç—ã. –ü—É—Å—Ç—å –¥—Ä—É–≥–∏–µ —Ç–æ–∂–µ –ø–æ—Å–º–µ—é—Ç—Å—è –Ω–∞–¥ —Ç–æ–±–æ–π.`;
            setCatEmote('happy'); 
        });

        // –ö–∞–Ω–∞–ª—å–Ω—ã–π –ù–∞–¥–∑–æ—Ä (–ò–º–∏—Ç–∞—Ü–∏—è –ü–æ–º–æ—â–∏)
        document.getElementById('statusBtn').addEventListener('click', () => {
            TWA.showConfirm(`–ù—É —á—ë, ${userName}, —Ç—ã —Ç–∞–º –≤ –∫–∞–Ω–∞–ª–µ/—á–∞—Ç–µ —Å–≤–æ–µ–º —á—Ç–æ-–Ω–∏–±—É–¥—å —Å–¥–µ–ª–∞–ª, *—Ö–æ–∑—è–∏–Ω-–±–æ–º–∂*? (–°–∫–∞–∂–∏ –ø—Ä–∞–≤–¥—É, —è –≤—Å—ë —Ä–∞–≤–Ω–æ —Ç–µ–±–µ –Ω–µ –ø–æ–≤–µ—Ä—é)`, (confirmed) => {
                 if (confirmed) {
                    chatOutput.innerHTML = `<span class="message-status">${catName}:</span> –°–¥–µ–ª–∞–ª? **–í–†–Å–®–¨! –¢–´ –¢–ê–ú –ù–ò–•–£–Ø –ù–ï –î–ï–õ–ê–ï–®–¨!** –¢–≤–æ—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ ‚Äî –≥–æ–≤–Ω–æ. –ò–¥–∏ –¥–µ–ª–∞–π!`;
                    setCatEmote('angry');
                 } else {
                    chatOutput.innerHTML = `<span class="message-status">${catName}:</span> –ü—Ä–∏–∑–Ω–∞–ª—Å—è, —á—Ç–æ –Ω–∏—á–µ–≥–æ –Ω–µ —Å–¥–µ–ª–∞–ª. **–•–û–¢–¨ –ß–ï–°–¢–ù–´–ô –î–ï–ë–ò–õ!** –ò–¥–∏ –¥–µ–ª–∞–π, –∏–Ω–∞—á–µ —è —Ç–µ–±—è –∑–∞–±—å—é.`;
                    setCatEmote('fact');
                 }
            });
        });

        // === –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ===
        function initializeApp() {
            loadData();
            catNameDisplay.textContent = `${catName} ‚Äî –¢–í–û–ô –¢–û–ö–°–ò–ß–ù–´–ô –ú–ï–ù–¢–û–†`;
            TWA.HapticFeedback.impactOccurred('medium');

            // –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ - –∑–∞–ø—Ä–æ—Å–∏—Ç—å –∏–º—è
            if (!localStorage.getItem(CAT_NAME_KEY)) {
                setTimeout(() => {
                    const newName = prompt("–≠–π, *–ª–æ—Ö*, —Ç—ã –∫—Ç–æ? –ü—Ä–∏–¥—É–º–∞–π –¥–ª—è –º–µ–Ω—è —É–≥–∞—Ä–Ω–æ–µ –∏–º—è:");
                    if (newName && newName.trim().length > 0) {
                        catName = newName.toUpperCase().trim();
                        saveData();
                        catNameDisplay.textContent = `${catName} ‚Äî –¢–í–û–ô –¢–û–ö–°–ò–ß–ù–´–ô –ú–ï–ù–¢–û–†!`;
                        chatOutput.innerHTML = `<span class="message-status">${catName}:</span> –¢–µ–ø–µ—Ä—å —è **${catName}**. –Ø –∑–∞–ø–æ–º–Ω–∏–ª. –ê —Ç–µ–ø–µ—Ä—å –ø–∏–∑–¥—É–π, –∑–∞–¥–∞–≤–∞–π —Ç—É–ø—ã–µ –≤–æ–ø—Ä–æ—Å—ã!`;
                    }
                }, 500);
            } else {
                 chatOutput.innerHTML = `<span class="message-status">${catName}:</span> –Ø —Ç—É—Ç, *${userName}*. –ß—ë –Ω–∞–¥–æ? –ù–µ –æ—Ç–≤–ª–µ–∫–∞–π –º–µ–Ω—è –æ—Ç –¥–µ–≥—Ä–∞–¥–∞—Ü–∏–∏.`;
            }
        }

        catDisplay.addEventListener('click', () => TWA.HapticFeedback.impactOccurred('medium'));
        sendButton.addEventListener('click', handleSend);
        textInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') handleSend();
        });

        initializeApp();
    </script>
</body>
</html>
